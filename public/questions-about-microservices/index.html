<!DOCTYPE html>
	<html lang="en-GB" prefix="og: http://ogp.me/ns#">
<head>

<meta charset="UTF-8"><script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(e,t,n){function r(n){if(!t[n]){var o=t[n]={exports:{}};e[n][0].call(o.exports,function(t){var o=e[n][1][t];return r(o||t)},o,o.exports)}return t[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t,n){function r(e,t){return function(){o(e,[(new Date).getTime()].concat(a(arguments)),null,t)}}var o=e("handle"),i=e(2),a=e(3);"undefined"==typeof window.newrelic&&(newrelic=NREUM);var u=["setPageViewName","addPageAction","setCustomAttribute","finished","addToTrace","inlineHit"],c=["addPageAction"],f="api-";i(u,function(e,t){newrelic[t]=r(f+t,"api")}),i(c,function(e,t){newrelic[t]=r(f+t)}),t.exports=newrelic,newrelic.noticeError=function(e){"string"==typeof e&&(e=new Error(e)),o("err",[e,(new Date).getTime()])}},{}],2:[function(e,t,n){function r(e,t){var n=[],r="",i=0;for(r in e)o.call(e,r)&&(n[i]=t(r,e[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;t.exports=r},{}],3:[function(e,t,n){function r(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,o=n-t||0,i=Array(0>o?0:o);++r<o;)i[r]=e[t+r];return i}t.exports=r},{}],ee:[function(e,t,n){function r(){}function o(e){function t(e){return e&&e instanceof r?e:e?u(e,a,i):i()}function n(n,r,o){e&&e(n,r,o);for(var i=t(o),a=l(n),u=a.length,c=0;u>c;c++)a[c].apply(i,r);var s=f[g[n]];return s&&s.push([m,n,r,i]),i}function p(e,t){w[e]=l(e).concat(t)}function l(e){return w[e]||[]}function d(e){return s[e]=s[e]||o(n)}function v(e,t){c(e,function(e,n){t=t||"feature",g[n]=t,t in f||(f[t]=[])})}var w={},g={},m={on:p,emit:n,get:d,listeners:l,context:t,buffer:v};return m}function i(){return new r}var a="nr@context",u=e("gos"),c=e(2),f={},s={},p=t.exports=o();p.backlog=f},{}],gos:[function(e,t,n){function r(e,t,n){if(o.call(e,t))return e[t];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return e[t]=r,r}var o=Object.prototype.hasOwnProperty;t.exports=r},{}],handle:[function(e,t,n){function r(e,t,n,r){o.buffer([e],r),o.emit(e,t,n)}var o=e("ee").get("handle");t.exports=r,r.ee=o},{}],id:[function(e,t,n){function r(e){var t=typeof e;return!e||"object"!==t&&"function"!==t?-1:e===window?0:a(e,i,function(){return o++})}var o=1,i="nr@id",a=e("gos");t.exports=r},{}],loader:[function(e,t,n){function r(){if(!w++){var e=v.info=NREUM.info,t=s.getElementsByTagName("script")[0];if(e&&e.licenseKey&&e.applicationID&&t){c(l,function(t,n){e[t]||(e[t]=n)});var n="https"===p.split(":")[0]||e.sslForHttp;v.proto=n?"https://":"http://",u("mark",["onload",a()],null,"api");var r=s.createElement("script");r.src=v.proto+e.agent,t.parentNode.insertBefore(r,t)}}}function o(){"complete"===s.readyState&&i()}function i(){u("mark",["domContent",a()],null,"api")}function a(){return(new Date).getTime()}var u=e("handle"),c=e(2),f=window,s=f.document;NREUM.o={ST:setTimeout,XHR:f.XMLHttpRequest,REQ:f.Request,EV:f.Event,PR:f.Promise,MO:f.MutationObserver},e(1);var p=(""+location).split("?")[0],l={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-892.min.js"},d=window.XMLHttpRequest&&XMLHttpRequest.prototype&&XMLHttpRequest.prototype.addEventListener&&!/CriOS/.test(navigator.userAgent),v=t.exports={offset:a(),origin:p,features:{},xhrWrappable:d};s.addEventListener?(s.addEventListener("DOMContentLoaded",i,!1),f.addEventListener("load",r,!1)):(s.attachEvent("onreadystatechange",o),f.attachEvent("onload",r)),u("mark",["firstbyte",a()],null,"api");var w=0},{}]},{},["loader"]);</script>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<title>A Question about Microservices</title>
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="icon" href="http://www.marcotroisi.com/wp-content/uploads/2014/02/1393636568_icon-navicon-round.png"><link rel="apple-touch-icon-precomposed" href="http://www.marcotroisi.com/wp-content/uploads/2014/02/1393636568_icon-navicon-round.png">
<meta name="description" content="A question on how to approach a microservices architecture, authentication, and over-bloated frameworks."/>
<meta name="robots" content="noodp"/>
<meta property="og:locale" content="en_GB" />
<meta property="og:type" content="website" />
<meta property="og:title" content="A Question about Microservices" />
<meta property="og:description" content="A question on how to approach a microservices architecture, authentication, and over-bloated frameworks." />
<meta property="og:url" content="http://www.marcotroisi.com" />
<meta property="og:site_name" content="Marco Troisi" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:description" content="A question on how to approach a microservices architecture, authentication, and over-bloated frameworks." />
<meta name="twitter:title" content="A Question about Microservices" />
<meta name="twitter:site" content="@marcotroisi" />

<meta name="twitter:creator" content="@marcotroisi" />
<script type='application/ld+json'>{"@context":"http:\/\/schema.org","@type":"WebSite","url":"http:\/\/www.marcotroisi.com\/","name":"Marco Troisi","potentialAction":{"@type":"SearchAction","target":"http:\/\/www.marcotroisi.com\/?s={search_term_string}","query-input":"required name=search_term_string"}}</script>
<script type='application/ld+json'>{"@context":"http:\/\/schema.org","@type":"Person","url":"http:\/\/www.marcotroisi.com","sameAs":["https:\/\/www.linkedin.com\/profile\/view?id=124863409&locale=en_US","https:\/\/twitter.com\/marcotroisi"],"name":"Marco Troisi"}</script>


<link rel="alternate" type="application/rss+xml" title="Marco Troisi - Feed" href="http://www.marcotroisi.com/feed/" />
<link rel='stylesheet' id='open-sans-css'  href='https://fonts.googleapis.com/css?family=Open+Sans%3A300italic%2C400italic%2C600italic%2C300%2C400%2C600&#038;subset=latin%2Clatin-ext&#038;ver=4.4.2' type='text/css' media='all' />
<link rel='stylesheet' id='decode-style-css'  href='http://www.marcotroisi.com/css/style.css?ver=2.9.2' type='text/css' media='all' />
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-36244852-1']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

<style id="custom-css-css">#optin-single input[type=submit]{width:10%}.entry-content{font-family:Georgia, Times, 'Times New Roman', serif}</style>
</head>

<body class="home blog logged-in admin-bar no-customize-support custom-background">

<div id="page" class="hfeed site">

	<header id="masthead" class="site-header" role="banner">

		<div class="site-branding">

			<a href="http://www.marcotroisi.com/" title="Marco Troisi"><img class="site-logo" src="http://www.marcotroisi.com/wp-content/uploads/2015/04/MarcoTroisi13.jpg"></a>
			<h2 class="site-description">technology, software development and productivity</h2>

		</div>
		<nav id="header-menu" class="menu horizontal-menu header-menu" role="navigation"><ul>
      <li id="menu-item-183" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-183"><a href="http://www.marcotroisi.com/">Home</a>
      
      </li>
      <li id="menu-item-38" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38"><a href="http://www.marcotroisi.com/about/">About Me</a></li>
      <li id="menu-item-76" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-76"><a href="http://www.marcotroisi.com/contact/">Contact</a></li>
      </ul>
    </nav>

	</header>


<div id="content" class="site-content">

  <div id="primary" class="content-area">
  	<main id="main" class="site-main" role="main">

      <article id="post-8" class="post-8 page type-page status-publish hentry">

      	<header class="entry-header">

          

      		<h1 class="entry-title">A Question about Microservices</h1>

      	</header>

      	<div class="entry-content">
          <p>I received this question about microservices, and I am happy to publish my reply. Perhaps someone else will also find it helpful.</p>

<blockquote>
<p>Hello Marco,</p>

<p>I&#8217;ve just stumbled upon your articles about microservices. I&#8217;m really trying to get into it, I find it a really interesting approach when it comes to build web apps. I got bored with all those frameworks claiming MVC etc. What I want to focus on is SOC, so microservices really fits in there. However I didn&#8217;t have time yet to practice what I could have read on that, and there are still things that are pretty obscure to me, maybe you could give me your point of view.</p>

<p>My main concern is about information sharing between services. What happens when a microservice is &#8220;linked&#8221; to another one ? If I take your example of WordPress refactoring, you&#8217;re for example stating that there could be a Post and Media Content microservices. But here, the media content microservices isn&#8217;t really standalone as it wouldn&#8217;t make sense to use it without the Post microservice, because Media Content is directly attached to a Post, see what I mean ? It sounds kind of weird to me, but maybe I&#8217;m wrong.</p>

<p>Also my second point would be about user authentication. How do you persist the state between microservices ? Do you have an example of that ?</p>

<p>Thanks for the articles, Waiting to hear from you.</p>

<p>Regards,</p>

<p>Romain</p>
</blockquote>

<hr />

<p>Dear Romain,</p>

<p>Thanks for reading my article on microservices, I appreciate it. Like you, I am also sick and tired of big, overbloated frameworks that claim to do everything for you, including making your coffee in the morning. While they may be a good choice in certain situations, I think many times they just add a lot of unnecessary complexity, unnecessary <em>ad hoc</em> concepts to be learned, and most importantly, unnecessary (potentially buggy) code that you haven&#8217;t written yourself. These days I find myself more inclined towards micro-frameworks, or even simple libraries that do just one thing; an example I love would be <a href="http://www.gorillatoolkit.org/">Gorilla</a>, a Golang set of standalone libraries that take care of most of the functionalities for which we would have traditionally used a framework.</p>

<p>As to your question, let me see if I can somehow help you here. When you say &#8220;linked&#8221;, I take it that you mean a microservice that&#8217;s <em>usually</em> (or, meant to be) used in conjunction with one or more other microservices. But that, when you think about it, is nothing strange! In fact, any microservice that would be meant to be only used on its own, would simply be a small monolith. For a microservice to be considered as such, it needs to be part of a <strong>microservices architecture</strong>, that is to say, a bigger application that does a lot of things, and that uses microservices to do each one of those things.</p>

<p>But I get where your doubt is coming from. You are thinking about the Media Content example, and it doesn&#8217;t feel to you like a standalone service as it would never be used separately from the Post microservice. I see two main problems in this reasoning.</p>

<p>Firstly, the idea of standalone-<em>ness</em> in a microservices architecture is meant to be mostly for the sake of the application&#8217;s solidity; in other words, you ought to think of the Post microservice as a standalone service not because you want to use it as such (in fact, you don&#8217;t! You want to use it together with Media, and maybe other services), but because in the event where the Media microservice should be unavailable (e.g. due to a network problem), you don&#8217;t want the entire application to be altogether down. What you want there, is for the Posts to be still available, even though you might have to gracefully handle the absence of pictures and videos.</p>

<p>I hope this gives you the right perspective. The idea is that you build a microservice independently, and you test it on its own, so to make sure that it will keep working even when other services are unavailable. Then, you mix it with the other microservices.</p>

<p>The second problem I see there is that, while I agree that Media will mostly be used in conjunction with the Post microservice, nevertheless you shouldn&#8217;t think of them as <em>only</em> usable together. If you keep things clean and separated, you will be better off in the future, as you never know what functionalities you are going to need as you move on. Think for example of a service that takes pictures from your Media microservice and send them to your Pinterest account using Pinterest&#8217;s APIs. In this case, you don&#8217;t really need the Post microservice, and it would be just one example of a situation where you need Media but you don&#8217;t need Post. So the real point here is the <em>separation of concerns</em>. Let each microservice do only one thing, and do it well. Let the Media microservice handle upload, resize, manipulation and what-have-you. Let the Post microservice handle the actual content and things like Markdown to HTML conversion (which could probably be another microservice anyway), and so on.</p>

<p>Regarding your second question about authentication, I would advice you make use of a layer that will take care of receiving requests from the outside, handle the user authentication, and then route the request to the appropriate microservice (together with <em>at least</em> a secret token, or something more sophisticated if you will), get the result from the microservice and send it back to user. Have a look at <a href="https://getkong.org/">Kong</a> for a reference and a better idea of what I am talking about (warning: it might be overhead for certain projects, but just so you have an idea).</p>

<p>Here are more resources for you, so you can go more in depth with these arguments:</p>

<ul>
<li><a href="https://blog.8thlight.com/uncle-bob/2015/08/06/let-the-magic-die.html">Make the magic go away (Uncle Bob)</a>, on the notion of not using overbloated frameworks!</li>
<li><a href="http://www.amazon.com/gp/product/1491950358/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=1491950358&amp;linkCode=as2&amp;tag=marctroi-20&amp;linkId=J656A6LG3XRMA3J4">Building Microservices (Sam Newman)</a><img src="http://ir-na.amazon-adsystem.com/e/ir?t=marctroi-20&#038;l=as2&#038;o=1&#038;a=1491950358" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /></li>
<li><a href="http://microservices.io/">Microservices.io</a>, lots of fine articles to give you a better overview of a microservices archicture, the good and the bad</li>
<li><a href="http://martinfowler.com/articles/microservices.html">Microservices guide (Martin Fowler)</a></li>
<li><a href="http://techblog.netflix.com/2015/02/a-microscope-on-microservices.html">Netflix and Microservices</a></li>
</ul>

<p>I wish you a lot of fun with microservices and your next project,</p>

<p>Marco</p>

<p><strong>If you&#8217;d like to send me your questions or suggestions, feel free to <a href="http://www.marcotroisi.com/contact/">contact me</a></strong>!</p>

        </div>

      </article>
    </main>
  </div>

</div>

</div>

  <nav id="footer-menu" class="menu horizontal-menu footer-menu" role="navigation">
    <ul>
    <li id="menu-item-183" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-183"><a href="http://www.marcotroisi.com/">Home</a></li>
    <li id="menu-item-38" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38"><a href="http://www.marcotroisi.com/about/">About Me</a></li>
    <li id="menu-item-76" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-76"><a href="http://www.marcotroisi.com/contact/">Contact</a></li>
    </ul>
    <ul id="social-menu">
      <li><a target="_blank" href="http://www.github.com/marcotroisi">Github</a></li>
      <li><a target="_blank" href="http://www.twitter.com/marcotroisi">Twitter</a></li>
      <li><a target="_blank" href="http://www.linkedin.com/in/marcotroisi">LinkedIn</a></li>
    </ul>
  </nav>

	<footer id="colophon" class="site-footer" role="contentinfo">

  <div class="site-colophon">
		<p>Â© 2016 Marco Troisi</p>
	</div>

	</footer>
</div>

